"use strict";if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.proxy={enumWindowType:{INPUT:0,MSGBOX:1},enumStatus:{SUCCESS:0,SERVER_ERROR:-1,ACTION_DISABLED:-2,SECURITY_REQUIREMENT:-3,INVALID_COMMAND:-4,INVALID_PROPERTY:-5},statusMessages:{success:"",serverError:null,actionDisabled:"Execution not allowed.",securityRequirement:"Security rights not enough.",invalidCommand:"Invalid command name.",invalidProperty:"Invalid property name."},lastStatus:{resultCode:0,message:""},host:{win:null,doc:null,widget:null,screenId:null,_showWindow:null,showWindow:function t(e,n){if(this._showWindow){this._showWindow(e,n)}},onCloseWindowCallback:null,onCloseWindow:function t(e){if(this.onCloseWindowCallback){this.onCloseWindowCallback(e)}}},ready:false,autoResize:true,propertiesInfo:{},securityLevels:[],_eventListeners:{},_onLoadListeners:[],_onSecurityChangeListeners:[],set:function t(e,n){var i=null;if(n)i=this._eventListeners[e.propName];else i=this._eventListeners["__"+e.propName];if(!i&&window.cwidget){i=window.cwidget.onChange.bind(window.cwidget)}if(i)i(e);else{this.lastStatus.resultCode=this.enumStatus.INVALID_PROPERTY;this.lastStatus.message=this.statusMessages.invalidProperty}},on:function t(e,n,i){var r=i?e:"__"+e;this._eventListeners[r]=n.bind(i||this)},addOnLoad:function t(e,n){this._onLoadListeners.push(e.bind(n))},addOnSecurityChange:function t(e,n){this._onSecurityChangeListeners.push(e.bind(n))},notifyHostIsPrepared:function t(){var e=null,n=null;for(var i=0;i<this._onLoadListeners.length;i++){e=this._onLoadListeners[i];if(!e){console.warn("CustomWidget: Invalid onload listener.");continue}e()}try{var r=new SmaCustomWidget.Helper;var s=r.getScriptTag("proxy.js");var o=s.getAttribute("autoResize");if(s&&o=="disable"){this.autoResize=false}if(this.autoResize){window.SmaCustomWidget.resizeManager.activate()}}catch(t){console.warn("CustomWidget: Could not load ResizeManager.js.")}},notifySecurityLevelsChanged:function t(e){var n=null;this.securityLevels=e;for(var i=0;i<this._onSecurityChangeListeners.length;i++){n=this._onSecurityChangeListeners[i];if(!n){console.warn("CustomWidget: Invalid security change listener.");continue}n(this.securityLevels)}},executeCommand:function t(e,n){this.host.widget.executeCommand(e,n)},getPosition:function t(){return this.host.widget.getPosition()},getSize:function t(){return this.host.widget.getSize()},applyAutoSize:function t(e,n,i,r){return this.host.widget.applyAutoSize(e,n,i,r)},getParentScreenSize:function t(){return this.host.widget.getParentScreenSize()}};"use strict";function _____x_____helper(){this.numToRGB=function(t){var e=0;var n=0;var i=0;var r=0;if(isNaN(t))return null;e=parseInt(t);n=e&255;i=e>>8&255;r=e>>16&255;return"rgb("+n+","+i+","+r+")"};this.numToKey=function(t){var e=""+t;var n="0000";return n.substring(0,n.length-e.length)+e};this.numToTimePart=function(t){var e=""+t;var n="00";return n.substring(0,n.length-e.length)+e};this.strToDate=function(t,e){var n=null;if(e){n=moment.utc(t);n=n.local()}else{if(t[t.length-1]=="Z"){t=t.substr(0,t.length-1)}n=moment(t)}if(!n||!n.isValid()){return t}var i=this.numToTimePart(n.year());if(parseInt(i)<2e3){var r=i.substr(2);if(parseInt(r)>29){i="19"+r}else{i="20"+r}}return this.numToTimePart(n.month()+1)+"/"+this.numToTimePart(n.date())+"/"+i};this.strToTime=function(t,e,n){var i=null;if(e){i=moment.utc(t);i=i.local()}else{if(t[t.length-1]=="Z"){t=t.substr(0,t.length-1)}i=moment(t)}if(!i||!i.isValid()){return t}return this.numToTimePart(i.hour())+":"+this.numToTimePart(i.minute())+":"+this.numToTimePart(i.second())+(n?"."+this.numToTimePart(i.millisecond()):"")};this.isValidTime=function(t){var e=t.split(":");if(e.length!=3){return false}if(isNaN(e[0])){return false}if(parseInt(e[0])>23){return false}if(isNaN(e[1])){return false}if(parseInt(e[1])>59){return false}if(isNaN(e[2])){return false}if(parseFloat(e[2])>59){return false}return true};this.isValidDate=function(t){var e=t.split("/");if(e.length!=3){return false}if(isNaN(e[0])){return false}if(parseInt(e[0])>12){return false}if(isNaN(e[1])){return false}if(parseInt(e[1])>31){return false}if(isNaN(e[2])){return false}return true};this.isValidDateTime=function(t){var e=t.split(" ");if(e.length!=2){return false}if(!this.isValidDate(e[0])){return false}return this.isValidTime(e[1])};this.strToDateTime=function(t,e,n){return this.strToDate(t,e)+" "+this.strToTime(t,e,n)};this.parseFontStyle=function(t,e){var n=false,i=false,r=false,s=false,o=false,a={fontStyle:"",fontWeight:""};if(!t||typeof t!=="string"||t.length===0){return a}n=t.toLowerCase().indexOf("regular")>=0;if(n){return a}i=t.toLowerCase().indexOf("italic")>=0;if(i){a.fontStyle="italic";e&&e.style&&(e.style.fontStyle=a.fontStyle)}r=t.toLowerCase().indexOf("bold")>=0;if(r){a.fontWeight="bold";e&&e.style&&(e.style.fontWeight=a.fontWeight)}s=t.toLowerCase().indexOf("black")>=0;if(s){a.fontWeight="bolder";e&&e.style&&(e.style.fontWeight=a.fontWeight)}o=t.toLowerCase().indexOf("oblique")>=0;if(o){a.fontStyle="italic";e&&e.style&&(e.style.fontStyle=a.fontStyle)}return a};this.addFindToArray=function(){if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function t(e){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof e!=="function"){throw new TypeError("predicate must be a function")}var n=Object(this);var i=n.length>>>0;var r=arguments[1];var t;for(var s=0;s<i;s++){t=n[s];if(e.call(r,t,s,n)){return t}}return undefined}})}};this.getScriptTag=function(t){var e=null;var n=null;var i=0;if(!t){return null}e=document.getElementsByTagName("script");if(!e){return null}for(i=0;i<e.length;i++){n=e[i].getAttribute("src");if(!n){continue}if(n.toLowerCase().indexOf(t.toLowerCase())>=0){return e[i]}}return null};this._CSVToArray=function(t,e){if(!t)return[];e=e||",";var n=new RegExp("(\\"+e+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+e+"\\r\\n]*))","gi");var i=[[]];var r=null;while(r=n.exec(t)){var s=r[1];if(s.length&&s!=e){i.push([])}if(r[2]){var o=r[2].replace(new RegExp('""',"g"),'"')}else{var o=r[3]}i[i.length-1].push(o)}return i};this.csvToJson=function(t,e){var n=this._CSVToArray(t,",");var i=[];for(var r=0;r<n.length;r++){i[r]={};for(var s=0;s<e.length&&s<n[r].length;s++){var o=e[s];i[r][o]=n[r][s]}}return i}}if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.Helper=_____x_____helper;"use strict";function _____x_____SmaCustomWidgetResizeManager(){var t=null,e=null,n=null,i=null,r=null,s=null,o=false,a=null,l=null,u=null,f=function t(e){var n;var r=e.length;var s=false;var o=0;var a=0;var l=0;for(n=0;n<r;++n){o=e[n].addedNodes.length;a=e[n].removedNodes.length;if(e[n].type=="childList"){for(l=0;l<o;++l){p(e[n].addedNodes[l],true);C(e[n].addedNodes[l])}for(l=0;l<a;++l){if(S(e[n].removedNodes[l])){s=true}}}else{if(S(e[n].target)){s=true}}}if(s){if(i){clearTimeout(i)}i=setTimeout(h.bind(this),0)}},h=function t(e){var n=document.getElementsByTagName("*"),o=n.length,f=0;d();for(f=0;f<o;++f){p(n[f],false);if(e){C(n[f])}}if(r==null){a.applyAutoSize(parseInt(s.l),parseInt(s.t),parseInt(s.w),parseInt(s.h));u={l:s.l,t:s.t};l={w:s.w,h:s.h}}i=null},d=function t(){r=null;if(!e){u={l:s.l,t:s.t};l={w:s.w,h:s.h}}},p=function t(i,s){var o=null,a=false,l=i.childNodes.length,u;if(!i||!i.parentNode||i.tagName=="HTML"||i.tagName=="HEAD"||i.tagName=="BODY"||i.tagName=="SCRIPT"||i.tagName=="TITLE"){return}if(i.getBoundingClientRect){o=i.getBoundingClientRect()}else{console.warn("CustomWidget: element has not getBoundingClientRect defined.");return}if(!r){r={t:{n:i,v:o.top},l:{n:i,v:o.left},r:{n:i,v:o.right},b:{n:i,v:o.bottom}}}if(!e){e={x:0,y:0}}if(r.t.v+e.x>o.top){r.t.v=o.top;r.t.n=i;a=true}if(r.l.v+e.y>o.left){r.l.v=o.left;r.l.n=i;a=true}if(r.r.v<=o.right){r.r.v=o.right;r.r.n=i;a=true}if(r.b.v<=o.bottom){r.b.v=o.bottom;r.b.n=i;a=true}if(a){if(n){clearTimeout(n)}n=setTimeout(c.bind(this),500)}if(s){for(u=0;u<l;++u){t(i.childNodes[u],s)}}},c=function t(){var i={l:null,t:null,w:null,h:null},s={x:e.x,y:e.y};if(!r||!e){return}i.l=g();i.t=m();w(i.l);_(i.t);i.w=v(s.x);i.h=y(s.y);document.documentElement.style.transform="translate("+e.x+"px ,"+e.y+"px)";a.applyAutoSize(parseInt(i.l),parseInt(i.t),parseInt(i.w),parseInt(i.h));u={l:i.l,t:i.t};l={w:i.w,h:i.h};n=null},g=function t(){return Math.min(u.l+r.l.v,s.l)},m=function t(){return Math.min(u.t+r.t.v,s.t)},v=function t(n){var i=r.r.v-n+e.x,o;i=Math.max(i,s.w);if(s.w>=i&&Math.abs(s.w-i)<e.x){i+=e.x}o=i-e.x;if(o<s.w){i+=s.w-o}return i},y=function t(n){var i=r.b.v-n+e.y,o;i=Math.max(i,s.h);if(s.h>=i&&Math.abs(s.h-i)<e.y){i+=e.y}o=i-e.y;if(o<s.h){i+=s.h-o}return i},w=function t(n){if(r.l.v<0){if(r.l.v>0&&u.l>=0){e.x-=u.l-n}else{e.x+=u.l-n}}else{if(e.x>0){e.x+=Math.min(r.l.v,e.x)*-1}}},_=function t(n){if(r.t.v<0){if(r.t.v>0&&u.t>=0){e.y-=u.t-n}else{e.y+=u.t-n}}else{if(e.y>0){e.y+=Math.min(r.t.v,e.y)*-1}}},C=function e(n){var i=n.childNodes.length,r;t.observe(n,{attributes:true,childList:true,characterData:true});for(r=0;r<i;++r){e(n.childNodes[r])}},S=function t(e){var n,i=e.childElementCount;if(!r){return false}if(r.t.n==e||r.l.n==e||r.r.n==e||r.b.n==e){return true}for(n=0;n<i;n++){if(t(e.childNodes[n]))return true}return false};this.activate=function(){if(o){return}o=true;a=window.SmaCustomWidget.proxy;u={l:parseInt(a.getPosition().l),t:parseInt(a.getPosition().t)};l={w:parseInt(a.getSize().w),h:parseInt(a.getSize().h)};s={l:u.l,t:u.t,w:l.w,h:l.h};if(!t){setTimeout(function(){if(typeof MutationObserver==="undefined"){console.warn("CustomWidget: MutationObserver is not defined.")}else{t=new MutationObserver(f);if(t){h(true)}}}.bind(this),100)}}}if(typeof window.SmaCustomWidget==="undefined"){window.SmaCustomWidget={}}window.SmaCustomWidget.resizeManager=new _____x_____SmaCustomWidgetResizeManager;"use strict";(function(){var t=new SmaCustomWidget.Helper;var e=t.getScriptTag("proxy.js");var n="";var i=null;if(!e||!e.getAttribute("cwidget")){return}window.cwidget={_proxy:null,_config:null,_properties:null,_infosLastState:null,_listeners:new Map,parent:window.frameElement,enumWindowType:window.SmaCustomWidget.proxy.enumWindowType,init:function t(e){this._infosLastState=new Map;this._config=e;this._proxy=window.SmaCustomWidget.proxy;this._proxy.addOnLoad(this._onLoad.bind(this));this._properties=new Map;this._createProperties();this._proxy.ready=true},_onLoad:function t(){var e="";var n=null;var i=null;for(e in this._config.properties){i=this._config.properties[e];n=i.name;if(!i.value){if(i.type&&i.type.toLowerCase()==="array"){i.value=[]}else{i.value=""}}this._properties.set(n,i);this._proxy.on(n,this.onChange,this)}},onChange:function t(e){var n=null;var i=-1;this._infosLastState.set(e.propName,JSON.parse(JSON.stringify(e)));if(this._properties===null||this._properties.size===0){return}n=this._properties.get(e.propName);if(n){if(!n.type||n.type.toLowerCase()!=="array"){n.value=e.value}}else{var r=e.propName.substr(0,e.propName.length-4);var s=e.propName.substr(-4);if(this._properties.has(r)&&isNaN(s)===false){e.propName=r;i=parseInt(s);n=this._properties.get(r);if(n.type&&n.type.toLowerCase()==="array"){n.value[i]=e.value}}}this._notifyChange(e.propName,i)},_notifyChange:function t(e,n){var i=0;var r=this._listeners.get(e);if(!r){return}for(i=0;i<r.length;i++){r[i](e,n)}},_createProperties:function t(){var e=this;var n="";var i=null;var r=function t(){var r=e._config.properties[n].name;Object.defineProperty(e,r,{get:function t(){return e._properties.get(r).value},set:function t(n){i=e._properties.get(r);if(i&&(!i.type||i.type.toLowerCase()!=="array")){i.value=n;if(e._proxy){e._proxy.set({propName:r,value:n})}}}})};for(n in this._config.properties){r()}},dispatchEvent:function t(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++){i[r-1]=arguments[r]}this._proxy&&this._proxy.executeCommand(e,i)},on:function t(e,n){var i=this;var r=undefined;if(!n||typeof n!=="function"){return}if(this._listeners.has(e)===false){this._listeners.set(e,[])}this._listeners.get(e).push(n);if(this._infosLastState!==null){setTimeout(function(){r=i._infosLastState.get(e);if(r!==undefined){i.onChange(r)}},0)}},getPropertyId:function t(e){if(this._proxy&&this._proxy.propertiesInfo&&this._proxy.propertiesInfo[e]){return this._proxy.propertiesInfo[e].id}else{return null}},get host(){if(this._proxy&&this._proxy.host){return this._proxy.host}else{return null}},get services(){if(this._proxy&&this._proxy.host&&this._proxy.host.win&&this._proxy.host.win.services){return this._proxy.host.win.services}else{return{updateData:function t(e,n,i,r,s,o){console.warn("The function\t\t\t\t\t\t'updateData(screenId, ownerId, row, column, values, callback)'\t\t\t\t\t\t is not implemented.")}}}},set avoidInteraction(t){if(this._proxy&&this._proxy.host&&this._proxy.host.widget&&this._proxy.host.widget._frame){this._proxy.host.widget._frame.style.pointerEvents=t===true?"none":""}}};n=e.getAttribute("cwidget");var r=new XMLHttpRequest;r.open("GET","./"+n+".wjson");r.send(null);i=setInterval(function(){if(r.readyState!==4){return}clearInterval(i);if(!window.cef_apply_auto_size&&r.status!==200){console.error("Could not load the "+n+"configuration file");return}try{window.cwidget.init(JSON.parse(r.responseText))}catch(t){console.error(t.message)}r=null},0)})();